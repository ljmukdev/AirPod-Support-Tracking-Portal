<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="LJM AirPod Support - Register your warranty and get setup assistance">
    <title>Warranty Registration | LJM AirPod Support</title>
    <link rel="stylesheet" href="css/styles.css">
    <script>
        // Inline version display - always runs immediately
        (function() {
            function showVersion() {
                // Remove any existing version displays (from version.js or previous runs)
                var existing = document.getElementById('version-display') || document.querySelector('.version-display');
                if (existing) {
                    existing.remove();
                }
                
                var el = document.createElement('div');
                el.id = 'version-display';
                el.className = 'version-display';
                el.style.cssText = 'position:fixed;top:10px;right:10px;font-size:0.7rem;color:rgba(0,0,0,0.7);font-family:"Courier New",monospace;z-index:99999;padding:4px 8px;background:rgba(255,255,255,0.9);border-radius:4px;box-shadow:0 1px 3px rgba(0,0,0,0.2);pointer-events:none;';
                el.textContent = 'v1.2.3.012';
                el.title = 'Version 1.2.3 (Revision 012)';
                if (document.body) {
                    document.body.appendChild(el);
                } else {
                    setTimeout(function() {
                        if (document.body) document.body.appendChild(el);
                    }, 100);
                }
                
                // Fetch version from API to ensure it's up to date
                fetch('/api/version')
                    .then(function(res) { return res.json(); })
                    .then(function(data) {
                        if (data && data.version && data.revision) {
                            el.textContent = 'v' + data.version + '.' + data.revision;
                            el.title = 'Version ' + data.version + ' (Revision ' + data.revision + ')';
                        }
                    })
                    .catch(function(err) {
                        console.log('Version fetch failed, using inline version');
                    });
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', showVersion);
            } else {
                showVersion();
            }
            setTimeout(showVersion, 1000);
        })();
    </script>
    <style>
        /* Body and Layout */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'San Francisco', 'Segoe UI', sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        /* Focus Overlay - Removed grey overlay */
        .focus-overlay {
            display: none !important;
        }
        
        /* Header Styles */
        .header {
            background: white;
            border-bottom: 1px solid #e8ecf1;
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }
        
        /* Responsive header padding to match container padding exactly */
        @media (max-width: 1199px) {
            .header-content {
                padding: 0 24px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                padding: 0 20px;
            }
        }
        
        @media (max-width: 640px) {
            .header-content {
                padding: 0 16px;
            }
        }
        
        @media (max-width: 480px) {
            .header-content {
                padding: 0 12px;
            }
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }
        
        .logo-icon {
            width: 44px;
            height: 44px;
            background: #284064;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 15px;
            letter-spacing: -0.5px;
            flex-shrink: 0;
        }
        
        .logo-text {
            color: #1a1a1a;
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.3px;
            white-space: nowrap;
        }
        
        .nav-links {
            display: flex;
            gap: 24px;
            flex-shrink: 0;
            align-items: center;
        }
        
        .nav-links a {
            color: #6c757d;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s;
            cursor: pointer;
            white-space: nowrap;
        }
        
        .nav-links a:hover:not(.disabled-nav) {
            color: #1a1a1a;
        }
        
        .disabled-nav {
            opacity: 0.3;
            cursor: not-allowed !important;
            pointer-events: none;
        }
        
        /* Responsive header adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                gap: 12px;
            }
            
            .logo {
                flex: 1;
                min-width: 0;
            }
            
            .logo-text {
                font-size: 16px;
            }
            
            .logo-icon {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            
            .nav-links {
                gap: 16px;
                width: 100%;
                justify-content: flex-start;
            }
            
            .nav-links a {
                font-size: 13px;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                padding: 12px 0;
            }
            
            .logo-text {
                font-size: 14px;
            }
            
            .logo-icon {
                width: 36px;
                height: 36px;
                font-size: 13px;
            }
            
            .nav-links {
                gap: 12px;
            }
            
            .nav-links a {
                font-size: 12px;
            }
        }
        
        /* Progress Indicator */
        .progress-indicator {
            background: white;
            border-bottom: 1px solid #e8ecf1;
            padding: 16px 0;
            position: sticky;
            top: 73px;
            z-index: 99;
        }
        
        .progress-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .progress-steps {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }
        
        .progress-step {
            flex: 1;
            height: 4px;
            background: #e8ecf1;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-step.active {
            background: #284064;
        }
        
        .progress-step.completed {
            background: #28a745;
        }
        
        .progress-text {
            font-size: 12px;
            color: #6c757d;
            font-weight: 500;
            white-space: nowrap;
        }
        
        /* Container Styles */
        .container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 24px 40px 24px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            position: relative;
            z-index: 1;
        }
        
        /* Card Styles */
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
            position: relative;
            z-index: 2;
        }
        
        /* Align header elements with card edges */
        /* Card is 800px centered in 1200px container with 24px padding */
        /* Card left edge: (1200 - 800) / 2 + 24 = 224px from container left */
        /* Card right edge: 224 + 800 = 1024px from container left */
        @media (min-width: 1200px) {
            .header-content {
                position: relative;
            }
            
            .logo {
                position: absolute;
                left: calc((100% - 1200px) / 2 + 224px);
            }
            
            .nav-links {
                position: absolute;
                right: calc((100% - 1200px) / 2 + (1200 - 1024px));
            }
        }
        
        .card-body {
            padding: 36px 48px;
        }
        
        /* Responsive container and card adjustments */
        @media (max-width: 1199px) {
            .container {
                padding: 20px 24px 40px 24px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 16px 20px 32px 20px;
            }
            
            .card-body {
                padding: 32px 28px;
            }
        }
        
        @media (max-width: 640px) {
            .container {
                padding: 16px 16px 24px 16px;
            }
            
            .card-body {
                padding: 32px 24px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 12px 12px 20px 12px;
            }
            
            .card-body {
                padding: 24px 20px;
            }
        }
        
        /* Step Container */
        .step-container {
            display: none;
        }
        
        .step-container.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Security Code Entry */
        .security-code-section {
            text-align: center;
        }
        
        .security-code-section h2 {
            margin-bottom: 8px;
            color: #1a1a1a;
            font-size: 1.75rem;
        }
        
        .security-code-section .subtitle {
            color: #6c757d;
            margin-bottom: 32px;
            font-size: 0.95rem;
        }
        
        .security-input-wrapper {
            position: relative;
            margin-bottom: 24px;
        }
        
        .security-input {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid #e8ecf1;
            border-radius: 12px;
            font-size: 18px;
            text-align: center;
            letter-spacing: 3px;
            font-family: 'SF Mono', 'Monaco', monospace;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .security-input:focus {
            outline: none;
            border-color: #284064;
            box-shadow: 0 0 0 4px rgba(40, 64, 100, 0.1);
        }
        
        .security-input.valid {
            border-color: #28a745;
        }
        
        .validation-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            display: none;
            font-size: 20px;
            font-weight: bold;
            color: #28a745;
        }
        
        .validation-icon.show {
            display: block;
        }
        
        .continue-btn {
            width: 100%;
            padding: 18px;
            background: #284064;
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 14px rgba(40, 64, 100, 0.3);
            animation: pulse 2s infinite;
        }
        
        .continue-btn:hover:not(:disabled) {
            background: #1e2f4a;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 64, 100, 0.4);
        }
        
        .continue-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 4px 14px rgba(40, 64, 100, 0.3); }
            50% { box-shadow: 0 4px 20px rgba(40, 64, 100, 0.5); }
        }
        
        .error-message {
            background: #fee;
            color: #c33;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .support-contact {
            text-align: center;
            padding: 24px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-top: 24px;
            display: none;
        }
        
        .support-contact.show {
            display: block;
        }
        
        /* Success Animation */
        .success-animation {
            text-align: center;
            padding: 48px 24px;
            display: none;
        }
        
        .success-animation.show {
            display: block;
            animation: scaleIn 0.5s ease;
        }
        
        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .success-icon {
            width: 80px;
            height: 80px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            animation: checkmark 0.6s ease 0.3s both;
        }
        
        @keyframes checkmark {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Warranty Confirmation */
        .warranty-confirmation {
            padding: 24px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 24px;
        }
        
        .warranty-warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            color: #856404;
        }
        
        /* Extended Warranty Options */
        .warranty-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin: 32px 0;
        }
        
        .warranty-card {
            border: 3px solid #e8ecf1;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            position: relative;
        }
        
        .warranty-card:hover {
            border-color: #284064;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(40, 64, 100, 0.15);
        }
        
        .warranty-card.selected {
            border-color: #284064;
            background: rgba(40, 64, 100, 0.05);
            box-shadow: 0 4px 16px rgba(40, 64, 100, 0.2);
        }
        
        .warranty-card.grayed-out {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .warranty-badge {
            position: absolute;
            top: -12px;
            right: 16px;
            background: #28a745;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .warranty-card h3 {
            margin: 0 0 12px 0;
            color: #1a1a1a;
            font-size: 1.25rem;
        }
        
        .warranty-price {
            font-size: 2rem;
            font-weight: bold;
            color: #284064;
            margin: 16px 0;
        }
        
        .warranty-details {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }
        
        .countdown-timer {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 12px;
            margin: 24px 0;
            text-align: center;
            font-weight: 600;
            color: #856404;
        }
        
        .trust-badges {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 24px;
            flex-wrap: wrap;
        }
        
        .trust-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6c757d;
            font-size: 0.85rem;
        }
        
        .skip-link {
            text-align: center;
            margin-top: 24px;
        }
        
        .skip-link a {
            color: #adb5bd;
            font-size: 0.85rem;
            text-decoration: none;
        }
        
        /* Accessory Upsell */
        .accessory-section {
            margin: 32px 0;
        }
        
        .bundle-label {
            background: #284064;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 24px;
        }
        
        .accessory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }
        
        .accessory-item {
            border: 2px solid #e8ecf1;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .accessory-item:hover {
            border-color: #284064;
        }
        
        .accessory-item.selected {
            border-color: #284064;
            background: rgba(40, 64, 100, 0.05);
        }
        
        .stock-warning {
            color: #dc3545;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 8px;
        }
        
        .price-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 12px;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #6c757d;
        }
        
        .bundle-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #28a745;
        }
        
        /* Setup Instructions */
        .setup-steps {
            margin: 32px 0;
        }
        
        .setup-step {
            border: 2px solid #e8ecf1;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
            display: none;
        }
        
        .setup-step.active {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .step-checkbox {
            margin-top: 16px;
        }
        
        .step-checkbox label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }
        
        /* Exit Intent Modal */
        .exit-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .exit-modal.show {
            display: flex;
        }
        
        .exit-modal-content {
            background: white;
            border-radius: 20px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .exit-modal h3 {
            margin-bottom: 16px;
            color: #1a1a1a;
        }
        
        .exit-modal p {
            color: #6c757d;
            margin-bottom: 24px;
        }
        
        .exit-modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #284064;
            color: white;
        }
        
        .btn-secondary {
            background: #e8ecf1;
            color: #1a1a1a;
        }
        
        /* Mobile Optimizations */
        @media (max-width: 640px) {
            .warranty-options {
                grid-template-columns: 1fr;
            }
            
            .accessory-grid {
                grid-template-columns: 1fr;
            }
            
            .continue-btn {
                padding: 16px;
                font-size: 15px;
                min-height: 48px; /* Larger touch target */
            }
            
            .trust-badges {
                flex-direction: column;
                gap: 12px;
            }
            
            .btn {
                min-height: 44px; /* Larger touch target */
                padding: 14px 24px;
            }
            
            .warranty-card {
                padding: 20px;
            }
            
            .accessory-item {
                padding: 20px;
                min-height: 120px;
            }
            
            .security-input {
                font-size: 16px; /* Prevent zoom on iOS */
            }
        }
        
        /* Prevent zoom on input focus (iOS) */
        @media (max-width: 640px) {
            input, select, textarea {
                font-size: 16px !important;
            }
        }
        
        /* Product Details */
        .product-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .product-detail-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .detail-label {
            color: #6c757d;
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .detail-value {
            color: #1a1a1a;
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        /* Photo Carousel Styles */
        .photo-carousel {
            position: relative;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .carousel-container {
            flex: 1;
            display: flex;
            gap: 12px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: #cbd5e0 transparent;
            padding: 8px 0;
        }
        
        .carousel-container::-webkit-scrollbar {
            height: 6px;
        }
        
        .carousel-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .carousel-container::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 3px;
        }
        
        .carousel-container::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        .carousel-photo {
            flex-shrink: 0;
            width: 150px;
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #e8ecf1;
            transition: all 0.3s ease;
            background: white;
        }
        
        .carousel-photo:hover {
            border-color: #284064;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 64, 100, 0.2);
        }
        
        .carousel-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .carousel-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #284064;
            background: white;
            color: #284064;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .carousel-button:hover {
            background: #284064;
            color: white;
        }
        
        .carousel-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .carousel-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #cbd5e0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .carousel-indicator.active {
            background: #284064;
            width: 24px;
            border-radius: 4px;
        }
        
        /* Image Modal Styles */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
        }
        
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            z-index: 1;
        }
        
        .modal-content img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        
        .modal-close {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid white;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 0;
            font-weight: bold;
            line-height: 1;
            cursor: pointer;
            display: flex !important;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10003;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            pointer-events: auto;
        }
        
        .modal-close::before,
        .modal-close::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 2px;
            background: white;
            border-radius: 1px;
        }
        
        .modal-close::before {
            transform: rotate(45deg);
        }
        
        .modal-close::after {
            transform: rotate(-45deg);
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: scale(1.1);
        }
        
        .modal-close:hover::before,
        .modal-close:hover::after {
            background: #1a1a1a;
        }
        
        .modal-close:active {
            transform: scale(0.95);
        }
        
        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid white;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10001;
        }
        
        .modal-nav:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .modal-prev {
            left: 20px;
        }
        
        .modal-next {
            right: 20px;
        }
        
        @media (max-width: 768px) {
            .carousel-photo {
                width: 120px;
                height: 120px;
            }
            
            .carousel-button {
                width: 32px;
                height: 32px;
                font-size: 20px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .modal-close {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                z-index: 10003;
            }
            
            .modal-close::before,
            .modal-close::after {
                width: 18px;
                height: 2px;
            }
            
            .modal-nav {
                width: 40px;
                height: 40px;
                font-size: 24px;
            }
            
            .modal-prev {
                left: 10px;
            }
            
            .modal-next {
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Focus Overlay -->
    <div class="focus-overlay" id="focusOverlay"></div>
    
    <!-- Header -->
    <header class="header" id="mainHeader">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">LJM</div>
                <div class="logo-text">Support <span>Center</span></div>
            </div>
            <nav class="nav-links" id="navLinks">
                <a href="index.html" class="nav-link">Home</a>
                <a href="terms-and-conditions.html" class="nav-link">Terms</a>
                <a href="privacy-policy.html" class="nav-link">Privacy</a>
            </nav>
        </div>
    </header>
    
    <!-- Progress Indicator -->
    <div class="progress-indicator" id="progressIndicator" style="display: none;">
        <div class="progress-content">
            <div class="progress-steps" id="progressSteps"></div>
            <div class="progress-text" id="progressText">Step 1 of 5</div>
        </div>
    </div>

    <main class="container">
        <div class="card">
            <div class="card-body">
                <!-- Step 1: Security Code Entry / Product Verification -->
                <div class="step-container" id="step1" data-step="1">
                    <div class="security-code-section">
                        <!-- Security Code Entry (shown when not coming from home page) -->
                        <div id="securityCodeEntrySection">
                            <h2>Enter Your Security Code</h2>
                            <p class="subtitle">Enter the security code from your product packaging to begin warranty registration</p>
                            
                            <div class="security-input-wrapper">
                                <input 
                                    type="text" 
                                    id="securityCodeInput" 
                                    class="security-input" 
                                    placeholder="XXXX-XXXX-XXXX" 
                                    maxlength="20"
                                    autocomplete="off"
                                >
                                <span class="validation-icon" id="validationIcon">✓</span>
                            </div>
                            <div class="error-message" id="errorMessage"></div>
                            <div class="support-contact" id="supportContact">
                                <h3>Please call support for assistance</h3>
                                <p style="font-size: 1.25rem; font-weight: 600; color: #284064; margin-top: 12px;">1-800-555-0123</p>
                            </div>
                        </div>
                        
                        <!-- Product Record Display (shown after validation or when coming from home page) -->
                        <div id="productRecordDisplay" style="display: none; margin-top: 32px;">
                            <div style="background: #f8f9fa; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                                <h3 style="margin-top: 0; color: #1a1a1a; margin-bottom: 16px;">✓ Product Found</h3>
                                <p style="color: #6c757d; margin-bottom: 20px;">Please verify this matches the product you purchased before continuing:</p>
                                
                                <!-- Product Details -->
                                <div class="product-details" id="productDetailsStep1"></div>
                                
                                <!-- Photo Carousel -->
                                <div id="photoCarouselStep1" style="margin: 24px 0; display: none;">
                                    <h4 style="margin: 0 0 16px 0; color: #1a1a1a; font-size: 1rem; font-weight: 600;">Product Photos</h4>
                                    <div class="photo-carousel">
                                        <button class="carousel-button carousel-prev" id="carouselPrevStep1" aria-label="Previous photo">‹</button>
                                        <div class="carousel-container" id="carouselContainerStep1">
                                            <!-- Photos will be inserted here -->
                                        </div>
                                        <button class="carousel-button carousel-next" id="carouselNextStep1" aria-label="Next photo">›</button>
                                    </div>
                                    <div class="carousel-indicators" id="carouselIndicatorsStep1">
                                        <!-- Indicators will be inserted here -->
                                    </div>
                                </div>
                                
                                <!-- Step-by-Step Verification -->
                                <div id="verificationSteps" style="margin-top: 24px;">
                                    <div style="text-align: center; margin-bottom: 20px;">
                                        <span style="color: #6c757d; font-size: 0.9rem;">Verification Step <span id="currentVerificationStep">1</span> of <span id="totalVerificationSteps">5</span></span>
                                    </div>
                                    
                                    <!-- Step 1: Compatibility Check -->
                                    <div class="verification-step" data-step="1" style="display: none;">
                                        <div style="background: white; border: 2px solid #e8ecf1; border-radius: 12px; padding: 24px;">
                                            <h4 style="margin-top: 0; color: #1a1a1a; font-size: 1.1rem; margin-bottom: 12px;">Are your existing parts compatible?</h4>
                                            <p style="color: #6c757d; margin-bottom: 16px; line-height: 1.6;">
                                                You purchased <strong style="color: #284064;" id="purchasedPartNumber">-</strong>. 
                                                Make sure you have parts <strong style="color: #284064;" id="compatiblePartNumbers">-</strong>.
                                            </p>
                                            
                                            <!-- Example Images of Compatible Parts -->
                                            <div id="compatiblePartsExamples" style="margin: 20px 0; display: none;">
                                                <p style="color: #6c757d; font-size: 0.9rem; margin-bottom: 12px; font-weight: 600;">Example images of compatible parts:</p>
                                                <div id="compatiblePartsExamplesGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 16px;">
                                                    <!-- Example images will be inserted here -->
                                                </div>
                                            </div>
                                            
                                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                                                    <input type="radio" name="verifyCompatibility" id="verifyCompatibilityYes" value="yes" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">Yes, my existing parts are compatible</span>
                                                </label>
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
                                                    <input type="radio" name="verifyCompatibility" id="verifyCompatibilityNo" value="no" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">No, my parts are not compatible</span>
                                                </label>
                                            </div>
                                            
                                            <!-- Compatibility Explanation (shown when "No" is selected) -->
                                            <div id="compatibilityExplanation" style="display: none; margin-top: 20px; padding: 20px; background: #e7f3ff; border: 2px solid #0064D2; border-radius: 8px;">
                                                <h5 style="color: #0064D2; margin-top: 0; margin-bottom: 12px; font-size: 1rem; font-weight: 600;">Understanding Compatibility</h5>
                                                <p style="color: #1a1a1a; margin-bottom: 12px; line-height: 1.6;">
                                                    <strong>Important:</strong> AirPod replacement parts are designed to work only with compatible parts from the same generation. 
                                                    Each part in your AirPod set (left earbud, right earbud, and case) must be compatible with each other for the system to function properly.
                                                </p>
                                                <p style="color: #1a1a1a; margin-bottom: 12px; line-height: 1.6;">
                                                    The part you purchased (<strong id="purchasedPartNumberExplanation">-</strong>) will only function correctly when paired with the specific compatible parts it was designed for 
                                                    (<strong id="compatiblePartNumbersExplanation">-</strong>).
                                                </p>
                                                <p style="color: #1a1a1a; margin-bottom: 0; line-height: 1.6;">
                                                    If your existing parts are not compatible with the part you purchased, they will not work together properly. 
                                                    This is a technical limitation of how AirPods are designed and paired by Apple.
                                                </p>
                                                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #b3d9ff;">
                                                    <button type="button" onclick="window.location.href='ebay-return.html'" style="padding: 10px 20px; background: #0064D2; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">
                                                        Continue to Return Process
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Step 2: Authenticity Check -->
                                    <div class="verification-step" data-step="2" style="display: none;">
                                        <div style="background: white; border: 2px solid #e8ecf1; border-radius: 12px; padding: 24px;">
                                            <h4 style="margin-top: 0; color: #1a1a1a; font-size: 1.1rem; margin-bottom: 12px;">Are your existing parts authentic?</h4>
                                            <p style="color: #6c757d; margin-bottom: 16px; line-height: 1.6;">
                                                Check inside your case lid or on the AirPod stem for these markings:
                                            </p>
                                            
                                            <!-- Location Diagrams - Dynamically Updated -->
                                            <div id="authenticityImagesGrid" style="display: none; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                                <div id="caseImageContainer" style="background: white; padding: 16px; border-radius: 8px; border: 2px solid #e8ecf1; text-align: center; display: none;">
                                                    <img id="authenticityCaseImage" src="" alt="Markings inside case lid" style="width: 100%; max-width: 400px; height: auto; display: block; margin: 0 auto 8px; border-radius: 8px; cursor: pointer;">
                                                    <div style="font-size: 0.85rem; color: #6c757d; font-weight: 600;">Case: Open lid and look inside</div>
                                                </div>
                                                <div id="airpodImageContainer" style="background: white; padding: 16px; border-radius: 8px; border: 2px solid #e8ecf1; text-align: center; display: none;">
                                                    <img id="authenticityAirPodImage" src="" alt="Markings on AirPod stem" style="width: 100%; max-width: 300px; height: auto; display: block; margin: 0 auto 8px; border-radius: 8px; cursor: pointer;">
                                                    <div style="font-size: 0.85rem; color: #6c757d; font-weight: 600;">AirPod: Check the stem</div>
                                                </div>
                                            </div>
                                            
                                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                                                    <input type="radio" name="verifyAuthenticity" id="verifyAuthenticityYes" value="yes" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">Yes, my parts have the correct markings</span>
                                                </label>
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
                                                    <input type="radio" name="verifyAuthenticity" id="verifyAuthenticityNo" value="no" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">No, my parts do not have the correct markings</span>
                                                </label>
                                            </div>
                                            
                                            <!-- Authenticity Explanation (shown when "No" is selected) -->
                                            <div id="authenticityExplanation" style="display: none; margin-top: 20px; padding: 20px; background: #e7f3ff; border: 2px solid #0064D2; border-radius: 8px;">
                                                <h5 style="color: #0064D2; margin-top: 0; margin-bottom: 12px; font-size: 1rem; font-weight: 600;">How to Check Authenticity</h5>
                                                <p style="color: #1a1a1a; margin-bottom: 12px; line-height: 1.6;">
                                                    <strong>Checking Serial Numbers:</strong> Apple manufactures each AirPod part (left earbud, right earbud, and case) with a <strong>unique serial number</strong> that is different for each component.
                                                </p>
                                                <p style="color: #1a1a1a; margin-bottom: 12px; line-height: 1.6;">
                                                    <strong>Where to Find Serial Numbers:</strong>
                                                </p>
                                                <ul style="color: #1a1a1a; margin-bottom: 12px; padding-left: 20px; line-height: 1.8;">
                                                    <li><strong>Case:</strong> Open the lid and look inside the case - you should see a serial number</li>
                                                    <li><strong>Left AirPod:</strong> Check the stem of the left earbud</li>
                                                    <li><strong>Right AirPod:</strong> Check the stem of the right earbud</li>
                                                </ul>
                                                <p style="color: #1a1a1a; margin-bottom: 12px; line-height: 1.6;">
                                                    <strong>Identifying Counterfeit AirPods:</strong> If you find that all your AirPod parts have identical serial numbers, or if serial numbers are missing, this indicates the items are counterfeit. 
                                                    Counterfeit manufacturers replicate the serial number from the packaging box (which matches the case serial number) onto all parts, making them appear genuine when checked through Apple's online serial number identifier tool.
                                                </p>
                                                <p style="color: #1a1a1a; margin-bottom: 0; line-height: 1.6;">
                                                    <strong>Authentic AirPods</strong> will always have three distinct serial numbers - one for each earbud and one for the case.
                                                </p>
                                                <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #b3d9ff;">
                                                    <button type="button" onclick="window.location.href='ebay-return.html'" style="padding: 10px 20px; background: #0064D2; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">
                                                        Continue to Return Process
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 3: Serial Number Uniqueness -->
                                    <div class="verification-step" data-step="3" style="display: none;">
                                        <div style="background: white; border: 2px solid #e8ecf1; border-radius: 12px; padding: 24px;">
                                            <h4 style="margin-top: 0; color: #1a1a1a; font-size: 1.1rem; margin-bottom: 12px;">Does each part have a different serial number?</h4>
                                            <p style="color: #6c757d; margin-bottom: 16px; line-height: 1.6;">
                                                Authentic AirPods have unique serial numbers on each part (left AirPod, right AirPod, and case). Check that each serial number is different.
                                            </p>
                                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                                                    <input type="radio" name="verifySerialNumbers" id="verifySerialNumbersYes" value="yes" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">Yes, each part has a different serial number</span>
                                                </label>
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
                                                    <input type="radio" name="verifySerialNumbers" id="verifySerialNumbersNo" value="no" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">No, the serial numbers are the same or missing</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 4: Condition Check -->
                                    <div class="verification-step" data-step="4" style="display: none;">
                                        <div style="background: white; border: 2px solid #e8ecf1; border-radius: 12px; padding: 24px;">
                                            <h4 style="margin-top: 0; color: #1a1a1a; font-size: 1.1rem; margin-bottom: 12px;">Are you happy with the product condition?</h4>
                                            <p style="color: #6c757d; margin-bottom: 16px; line-height: 1.6;">
                                                Review the product photos above. Check that the condition matches what you expected.
                                            </p>
                                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                                                    <input type="radio" name="verifyCondition" id="verifyConditionYes" value="yes" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">Yes, the condition is acceptable</span>
                                                </label>
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
                                                    <input type="radio" name="verifyCondition" id="verifyConditionNo" value="no" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">No, the condition is not acceptable</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Step 5: Final Confirmation -->
                                    <div class="verification-step" data-step="5" style="display: none;">
                                        <div style="background: white; border: 2px solid #e8ecf1; border-radius: 12px; padding: 24px;">
                                            <h4 style="margin-top: 0; color: #1a1a1a; font-size: 1.1rem; margin-bottom: 12px;">Ready to proceed?</h4>
                                            <p style="color: #6c757d; margin-bottom: 16px; line-height: 1.6;">
                                                If you need to return this item, do so through the platform you purchased it from and mark it as "Ordered the wrong item".
                                            </p>
                                            <div class="warranty-warning" style="margin-bottom: 16px;">
                                                <strong>⚠️ Remember:</strong> Do NOT open the packaging until you're certain this is the correct item.
                                            </div>
                                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #f8f9fa; border-radius: 8px;">
                                                    <input type="radio" name="verifyReady" id="verifyReadyYes" value="yes" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">I'm ready to continue with warranty registration</span>
                                                </label>
                                                <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
                                                    <input type="radio" name="verifyReady" id="verifyReadyNo" value="no" style="width: 20px; height: 20px; cursor: pointer;">
                                                    <span style="color: #1a1a1a; font-weight: 500;">I want to return this item</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="continue-btn" id="continueBtn1" disabled>Continue</button>
                    </div>
                </div>
                
                <!-- Return Process Step (shown when user selects "I want to return this item" on step 5) -->
                <div id="returnProcessStep" style="display: none;">
                    <div class="card-body">
                        <div style="background: white; border: 2px solid #e8ecf1; border-radius: 12px; padding: 24px;">
                            <h4 style="margin-top: 0; color: #1a1a1a; font-size: 1.1rem; margin-bottom: 16px;">Return Process</h4>
                            
                            <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                                <strong style="color: #856404;">⚠️ Important:</strong>
                                <p style="color: #856404; margin: 8px 0 0 0; line-height: 1.6;">
                                    Please do NOT open the packaging if you plan to return the item. 
                                    Items that have been opened will only receive a 50% refund.
                                </p>
                            </div>
                            
                            <div style="margin-bottom: 24px;">
                                <h5 style="color: #1a1a1a; margin-bottom: 12px; font-size: 1rem;">How to Return:</h5>
                                <ol style="color: #6c757d; line-height: 1.8; padding-left: 20px; margin: 0;">
                                    <li>Go to your eBay Purchase History</li>
                                    <li>Find the order for this AirPod replacement part</li>
                                    <li>Click on the order and select "Return this item" or "Request a return"</li>
                                    <li>When prompted for the return reason, select <strong>"Ordered the wrong item"</strong></li>
                                    <li>Follow eBay's instructions to print the return label and send the item back</li>
                                    <li>Make sure to include all original packaging</li>
                                </ol>
                            </div>
                            
                            <div style="margin-bottom: 24px;">
                                <h5 style="color: #1a1a1a; margin-bottom: 12px; font-size: 1rem;">Feedback Form</h5>
                                <p style="color: #6c757d; margin-bottom: 12px; font-size: 0.9rem;">
                                    Please help us improve by telling us why you're returning this item:
                                </p>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; margin-bottom: 8px; color: #1a1a1a; font-weight: 500;">Reason for Return *</label>
                                    <select id="returnReason" style="width: 100%; padding: 12px; border: 2px solid #e8ecf1; border-radius: 8px; font-size: 0.95rem; background: white;" required>
                                        <option value="">Please select a reason</option>
                                        <option value="parts_not_compatible">My existing parts are not compatible</option>
                                        <option value="parts_counterfeit">My existing parts appear to be counterfeit</option>
                                        <option value="wrong_part_received">I received the wrong part</option>
                                        <option value="changed_mind">I changed my mind</option>
                                        <option value="found_better_deal">Found a better deal elsewhere</option>
                                        <option value="other">Other reason</option>
                                    </select>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label style="display: block; margin-bottom: 8px; color: #1a1a1a; font-weight: 500;">Additional Comments (Optional)</label>
                                    <textarea id="returnComments" rows="4" style="width: 100%; padding: 12px; border: 2px solid #e8ecf1; border-radius: 8px; font-size: 0.95rem; font-family: inherit; resize: vertical;" placeholder="Please provide any additional details about your return..."></textarea>
                                </div>
                                <button type="button" id="submitReturnFeedback" class="continue-btn" style="background: #dc3545; margin-top: 8px;">
                                    Submit Feedback & Continue to Return Instructions
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    // Immediately hide step 1 if barcode is in URL (prevents flash of duplicate entry)
                    (function() {
                        const urlParams = new URLSearchParams(window.location.search);
                        if (urlParams.get('barcode')) {
                            const step1 = document.getElementById('step1');
                            if (step1) step1.style.display = 'none';
                        }
                    })();
                </script>
                
                <!-- Step 2: Product Record Review -->
                <div class="step-container" id="step2" data-step="2">
                    <h2 style="text-align: center; margin-bottom: 8px;">Verify Your Product</h2>
                    <p style="text-align: center; color: #6c757d; margin-bottom: 32px;">Please review your product details and photos before opening</p>
                    
                    <!-- Product Details -->
                    <div class="product-details" id="productDetailsReview"></div>
                    
                    <!-- Photo Carousel -->
                    <div id="photoCarouselReview" style="margin: 32px 0; display: none;">
                        <h3 style="margin: 0 0 16px 0; color: #1a1a1a; font-size: 1.1rem; font-weight: 600;">Product Photos</h3>
                        <div class="photo-carousel">
                            <button class="carousel-button carousel-prev" id="carouselPrevReview" aria-label="Previous photo">‹</button>
                            <div class="carousel-container" id="carouselContainerReview">
                                <!-- Photos will be inserted here -->
                            </div>
                            <button class="carousel-button carousel-next" id="carouselNextReview" aria-label="Next photo">›</button>
                        </div>
                        <div class="carousel-indicators" id="carouselIndicatorsReview">
                            <!-- Indicators will be inserted here -->
                        </div>
                    </div>
                    
                    <!-- Important Warning -->
                    <div class="warranty-warning" style="background: #fff3cd; border-color: #ffc107; margin: 24px 0;">
                        <strong>⚠️ Important:</strong> Please do NOT open your product packaging until you have:
                        <ul style="margin: 12px 0 0 20px; padding: 0;">
                            <li>Verified this is the correct compatible item for your existing AirPods</li>
                            <li>Checked the product photos match what you received</li>
                            <li>Confirmed the condition is acceptable</li>
                        </ul>
                    </div>
                    
                    <!-- Preliminary Pairing Instructions -->
                    <div style="background: #f8f9fa; border-radius: 12px; padding: 24px; margin: 24px 0;">
                        <h3 style="margin-top: 0; color: #1a1a1a;">Before You Begin Pairing</h3>
                        <ol style="margin: 16px 0; padding-left: 20px; color: #6c757d; line-height: 1.8;">
                            <li>Ensure your iPhone or iPad is nearby and unlocked</li>
                            <li>Make sure Bluetooth is enabled in Settings</li>
                            <li>Have your existing AirPods or case ready for comparison</li>
                            <li>Find a quiet area with good lighting</li>
                            <li>Keep the product packaging until pairing is complete</li>
                        </ol>
                    </div>
                    
                    <button class="continue-btn" id="continueBtn2">I've Verified My Product - Continue</button>
                </div>
                
                <!-- Step 3: Contact Details -->
                <div class="step-container" id="step3" data-step="3">
                    <div class="security-code-section">
                        <h2>Contact Information</h2>
                        <p class="subtitle">Please provide your contact details to activate your warranty</p>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="contactName" style="display: block; margin-bottom: 8px; color: #1a1a1a; font-weight: 500;">Full Name *</label>
                            <input 
                                type="text" 
                                id="contactName" 
                                class="security-input" 
                                placeholder="John Doe" 
                                required
                                style="text-align: left; padding-left: 16px; letter-spacing: normal; text-transform: none;"
                            >
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="contactEmail" style="display: block; margin-bottom: 8px; color: #1a1a1a; font-weight: 500;">Email Address *</label>
                            <input 
                                type="email" 
                                id="contactEmail" 
                                class="security-input" 
                                placeholder="john@example.com" 
                                required
                                style="text-align: left; padding-left: 16px; letter-spacing: normal; text-transform: none;"
                            >
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <label for="contactPhone" style="display: block; margin-bottom: 8px; color: #1a1a1a; font-weight: 500;">Phone Number *</label>
                            <input 
                                type="tel" 
                                id="contactPhone" 
                                class="security-input" 
                                placeholder="+44 7700 900123" 
                                required
                                style="text-align: left; padding-left: 16px; letter-spacing: normal; text-transform: none;"
                            >
                        </div>
                        
                        <!-- Terms & Conditions Section -->
                        <div id="termsSection" style="margin-top: 32px; padding: 20px; background: #f8f9fa; border-radius: 12px; border: 2px solid #e8ecf1;">
                            <h3 style="margin-top: 0; margin-bottom: 16px; color: #1a1a1a; font-size: 1.1rem; display: flex; align-items: center; gap: 8px;">
                                <span id="termsVersion" style="font-size: 0.7rem; color: #6c757d; font-weight: normal;">-</span>
                                <span>Terms & Conditions</span>
                            </h3>
                            <div id="termsContent" style="max-height: 200px; overflow-y: auto; padding: 15px; background: white; border-radius: 8px; margin-bottom: 16px; text-align: left; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;"></div>
                            <div style="display: flex; align-items: start; gap: 12px;">
                                <input 
                                    type="checkbox" 
                                    id="termsAccepted" 
                                    required
                                    style="margin-top: 4px; width: 20px; height: 20px; cursor: pointer;"
                                >
                                <label for="termsAccepted" style="cursor: pointer; color: #1a1a1a; font-size: 0.95rem; line-height: 1.5;">
                                    I have read and agree to the Terms & Conditions
                                </label>
                            </div>
                        </div>
                        
                        <button class="continue-btn" id="continueBtn3">Continue</button>
                    </div>
                </div>
                
                <!-- Step 4: Success Animation & Warranty Confirmation -->
                <div class="step-container" id="step4" data-step="4">
                    <div class="success-animation" id="successAnimation">
                        <div class="success-icon">✓</div>
                        <h2 style="color: #28a745;">Success!</h2>
                    </div>
                    <div class="warranty-confirmation" id="warrantyConfirmation" style="display: none;">
                        <div style="text-align: center; margin-bottom: 32px;">
                            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; box-shadow: 0 4px 20px rgba(40, 167, 69, 0.3);">
                                <span style="font-size: 40px; color: white;">✓</span>
                            </div>
                            <h2 style="color: #1a1a1a; margin-bottom: 8px; font-size: 1.75rem;">🎉 Your Product is Protected!</h2>
                            <p style="color: #6c757d; font-size: 1rem;">Your AirPod has been successfully registered</p>
                        </div>
                        
                        <div class="product-details" id="productDetailsDisplay"></div>
                        
                        <div style="margin-top: 32px; padding: 24px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 16px; border: 2px solid #28a745;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                <span style="font-size: 24px;">✓</span>
                                <h4 style="color: #28a745; margin: 0; font-size: 1.25rem;">Standard 30-Day Warranty Active</h4>
                            </div>
                            <p style="color: #6c757d; margin-bottom: 0; font-size: 0.95rem;">Your warranty expires: <strong style="color: #1a1a1a;" id="warrantyExpiry">-</strong></p>
                        </div>
                        
                        <div style="margin-top: 32px; padding: 24px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 16px; border-left: 6px solid #ff9800;">
                            <div style="display: flex; align-items: start; gap: 12px; margin-bottom: 16px;">
                                <span style="font-size: 24px;">⚠️</span>
                                <div style="flex: 1;">
                                    <h4 style="color: #856404; margin: 0 0 8px 0; font-size: 1.1rem;">Did You Know?</h4>
                                    <p style="color: #856404; margin: 0; line-height: 1.6; font-size: 0.95rem;">
                                        <strong>73% of AirPod issues occur after the 30-day warranty expires.</strong> Don't leave yourself unprotected - extend your coverage now and save up to 25% compared to replacement costs.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 32px; padding: 28px; background: linear-gradient(135deg, #284064 0%, #1e2f4a 100%); border-radius: 16px; color: white; text-align: center; box-shadow: 0 8px 32px rgba(40, 64, 100, 0.3);">
                            <h3 style="color: white; margin: 0 0 16px 0; font-size: 1.5rem;">🛡️ Protect Your Investment</h3>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 24px 0;">
                                <div style="text-align: center;">
                                    <div style="font-size: 32px; margin-bottom: 8px;">🔒</div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">Peace of Mind</div>
                                    <div style="font-size: 0.85rem; opacity: 0.9;">Full coverage for months</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 32px; margin-bottom: 8px;">💰</div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">Save Money</div>
                                    <div style="font-size: 0.85rem; opacity: 0.9;">Up to 25% savings</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 32px; margin-bottom: 8px;">⚡</div>
                                    <div style="font-weight: 600; margin-bottom: 4px;">Quick Claims</div>
                                    <div style="font-size: 0.85rem; opacity: 0.9;">Fast replacement process</div>
                                </div>
                            </div>
                            <p style="margin: 24px 0 0 0; font-size: 1rem; opacity: 0.95; line-height: 1.6;">
                                Extended protection plans start at just <strong style="font-size: 1.2rem;" id="lowestWarrantyPrice">£19.99</strong> for <span id="lowestWarrantyMonths">6 months</span> of comprehensive coverage
                            </p>
                        </div>
                        
                        <button class="continue-btn" id="continueBtn4" style="margin-top: 32px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); box-shadow: 0 6px 24px rgba(40, 167, 69, 0.4); font-size: 1.1rem; padding: 20px; font-weight: 700;">
                            🛡️ View Extended Protection Plans →
                        </button>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <a href="#" id="skipWarrantyStep4" style="color: #6c757d; text-decoration: none; font-size: 0.9rem; opacity: 0.8;">Skip for now</a>
                        </div>
                    </div>
                </div>
                
                <!-- Step 5: Extended Warranty Options -->
                <div class="step-container" id="step5" data-step="5">
                    <h2 style="text-align: center; margin-bottom: 8px;">Choose Your Protection Plan</h2>
                    <p style="text-align: center; color: #6c757d; margin-bottom: 32px;">Select the coverage that works best for you</p>
                    
                    <div class="countdown-timer" id="countdownTimer">
                        Special pricing expires in: <span id="timerDisplay">15:00</span>
                    </div>
                    
                    <div class="warranty-options">
                        <div class="warranty-card" data-plan="3month" id="warranty3Month" style="display: none;">
                            <h3>3-Month Protection</h3>
                            <div class="warranty-price">£0.00</div>
                            <div class="warranty-details">£0.00/month</div>
                        </div>
                        <div class="warranty-card selected" data-plan="6month" id="warranty6Month">
                            <div class="warranty-badge">Most Popular</div>
                            <h3>6-Month Protection</h3>
                            <div class="warranty-price">£0.00</div>
                            <div class="warranty-details">£0.00/month</div>
                        </div>
                        <div class="warranty-card" data-plan="12month" id="warranty12Month">
                            <div class="warranty-badge" style="background: #ffc107; color: #856404;">Best Value</div>
                            <h3>12-Month Protection</h3>
                            <div class="warranty-price">£0.00</div>
                            <div class="warranty-details">£0.00/month</div>
                        </div>
                    </div>
                    
                    <div class="trust-badges">
                        <div class="trust-badge">✓ 30-day money back guarantee</div>
                        <div class="trust-badge">✓ Instant activation</div>
                    </div>
                    
                    <div class="skip-link">
                        <a href="#" id="skipWarranty">Continue without protection</a>
                    </div>
                    
                    <button class="continue-btn" id="continueBtn5">Continue</button>
                </div>
                
                <!-- Step 6: Accessory Upsell -->
                <div class="step-container" id="step6" data-step="6">
                    <h2 style="text-align: center; margin-bottom: 8px;">Complete Your Setup</h2>
                    <p style="text-align: center; color: #6c757d; margin-bottom: 32px;">Frequently bought together</p>
                    
                    <div class="accessory-section" id="addonSalesSection">
                        <span class="bundle-label">Bundle Deal</span>
                        <div class="accessory-grid" id="addonSalesGrid">
                            <!-- Add-on sales will be dynamically loaded here -->
                        </div>
                        <div style="text-align: center; margin-top: 24px;" id="addonSalesPricing">
                            <!-- Pricing will be dynamically calculated and displayed here -->
                        </div>
                    </div>
                    
                    <div class="skip-link">
                        <a href="#" id="skipAccessories">Skip accessories</a>
                    </div>
                    
                    <button class="continue-btn" id="continueBtn6">Continue</button>
                </div>
                
                <!-- Step 7: Setup Instructions -->
                <div class="step-container" id="step7" data-step="7">
                    <h2 style="text-align: center; margin-bottom: 32px;">Setup Instructions</h2>
                    <div class="setup-steps" id="setupSteps">
                        <div class="setup-step active" data-step-num="1">
                            <h3>Step 1: Prepare Your Device</h3>
                            <p>Make sure your iPhone or iPad is nearby and unlocked. Open the Settings app.</p>
                            <div class="step-checkbox">
                                <label>
                                    <input type="checkbox" data-step="1">
                                    <span>I've completed this step</span>
                                </label>
                            </div>
                        </div>
                        <div class="setup-step" data-step-num="2">
                            <h3>Step 2: Open Bluetooth Settings</h3>
                            <p>Navigate to Settings > Bluetooth and ensure Bluetooth is turned on.</p>
                            <div class="step-checkbox">
                                <label>
                                    <input type="checkbox" data-step="2">
                                    <span>I've completed this step</span>
                                </label>
                            </div>
                        </div>
                        <div class="setup-step" data-step-num="3">
                            <h3>Step 3: Pair Your AirPod</h3>
                            <p>Hold your AirPod near your device with the case open. A connection prompt should appear.</p>
                            <div class="step-checkbox">
                                <label>
                                    <input type="checkbox" data-step="3">
                                    <span>I've completed this step</span>
                                </label>
                            </div>
                        </div>
                        <div class="setup-step" data-step-num="4">
                            <h3>Step 4: Complete Setup</h3>
                            <p>Follow the on-screen instructions to complete the pairing process.</p>
                            <div class="step-checkbox">
                                <label>
                                    <input type="checkbox" data-step="4">
                                    <span>I've completed this step</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <button class="continue-btn" id="continueBtn7" style="display: none;">Finish Setup</button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Exit Intent Modal -->
    <div class="exit-modal" id="exitModal">
        <div class="exit-modal-content">
            <h3>Wait! Don't lose your warranty activation</h3>
            <p>Complete your registration now and save 20% on extended protection</p>
            <div class="exit-modal-buttons">
                <button class="btn btn-primary" id="stayButton">Complete Registration</button>
                <button class="btn btn-secondary" id="leaveButton">Leave Anyway</button>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" id="modalClose" aria-label="Close modal" title="Close"></button>
            <button class="modal-nav modal-prev" id="modalPrev" aria-label="Previous image">‹</button>
            <img id="modalImage" src="" alt="Product photo">
            <button class="modal-nav modal-next" id="modalNext" aria-label="Next image">›</button>
        </div>
    </div>

    <script src="js/warranty-registration.js?v=1.2.0.055"></script>
</body>
</html>
